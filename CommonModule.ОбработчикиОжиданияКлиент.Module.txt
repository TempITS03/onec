//Процедура управляет общими обработчиками ожидания
//
Процедура ПодключениеОбработчиковОжидания(Обработчик,Подключить=Истина) Экспорт
	
	//отключим обработчик если такое вызвано
	Если НЕ Подключить Тогда
		ОтключитьОбработчикОжидания(Обработчик);
		Возврат;
	КонецЕсли;
	
	Если Обработчик = "ОповещатьПриСозданииНовогоЗадания" Тогда
		ТекущийПользователь = ОбщегоНазначения.ПолучитьЗначениеПеременной("глТекущийПользователь");
		
		Отбор = Новый Структура;
		Отбор.Вставить("Ссылка",ТекущийПользователь);
		ИмяСправочника = "Пользователи";
		ДанныеПользователя = ОбщегоНазначения.ПолучитьЗначениеСправочникаПоОписателю(Отбор,ИмяСправочника);
		
		Если ДанныеПользователя.Получить("ОповещатьПриСозданииНовогоЗадания") Тогда
			Таймаут = ?(ДанныеПользователя.Получить("Таймаут") = 0,60,ДанныеПользователя.Получить("Таймаут"));
			Если Подключить Тогда
				ПодключитьОбработчикОжидания("ОповещатьПриСозданииНовогоЗадания",Таймаут);
			КонецЕсли;
		КонецЕсли;
				
	КонецЕсли;
	
КонецПроцедуры	